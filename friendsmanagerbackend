from flask import Flask, request, jsonify

app = Flask(__name__)

# In-memory storage for simplicity (consider using a database)
user_data = {}

def suggest_friends(user_id):
    # Simple suggestion logic based on common characteristics
    suggestions = []
    for uid, data in user_data.items():
        if uid != user_id:
            common_race = data.get('race') == user_data[user_id].get('race')
            common_email = data.get('email') == user_data[user_id].get('email')
            common_phone = data.get('phone_number') == user_data[user_id].get('phone_number')

            if common_race or common_email or common_phone:
                suggestions.append(uid)

    return suggestions

@app.route('/add_user', methods=['POST'])
def add_user():
    data = request.get_json()
    user_id = data['user_id']
    user_data[user_id] = data

    return jsonify({'message': 'User added successfully'})

@app.route('/get_friends', methods=['GET'])
def get_friends():
    user_id = request.args.get('user_id')

    if user_id in user_data:
        # Get friends and suggestions
        friends = user_data[user_id].get('friends', [])
        suggested_friends = suggest_friends(user_id)

        return jsonify({'friends': friends, 'suggested_friends': suggested_friends})
    else:
        return jsonify({'friends': [], 'suggested_friends': []})

if __name__ == '__main__':
    app.run(debug=True)

